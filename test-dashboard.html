<!DOCTYPE html>
<html>
<head>
    <title>Dashboard Test</title>
    <script>
        async function testDashboard() {
            // First login
            const loginResponse = await fetch('http://localhost:8080/api/auth/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    email: 'test3@example.com',
                    password: 'Test1234!'
                })
            });
            
            if (!loginResponse.ok) {
                console.error('Login failed');
                document.getElementById('result').innerHTML = 'Login failed';
                return;
            }
            
            const loginData = await loginResponse.json();
            const token = loginData.accessToken;
            
            // Now fetch statistics
            const statsResponse = await fetch('http://localhost:8080/api/statistics', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (!statsResponse.ok) {
                console.error('Failed to fetch statistics');
                document.getElementById('result').innerHTML = 'Failed to fetch statistics';
                return;
            }
            
            const stats = await statsResponse.json();
            document.getElementById('result').innerHTML = `
                <h2>Dashboard Statistics:</h2>
                <pre>${JSON.stringify(stats, null, 2)}</pre>
            `;
        }
        
        window.onload = testDashboard;
    </script>
</head>
<body>
    <h1>Dashboard API Test</h1>
    <div id="result">Loading...</div>
</body>
</html>
