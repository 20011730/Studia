<!DOCTYPE html>
<html>
<head>
    <title>API Test</title>
    <meta charset="utf-8" />
</head>
<body>
    <h1>API Test Page</h1>
    
    <div id="status">Loading...</div>
    
    <script src="assets/js/api.js"></script>
    <script>
        window.addEventListener('load', function() {
            const statusDiv = document.getElementById('status');
            
            console.log('=== API Test Started ===');
            console.log('window.API:', window.API);
            console.log('window.TokenManager:', window.TokenManager);
            console.log('window.checkAuth:', window.checkAuth);
            console.log('API_BASE_URL:', window.API_BASE_URL);
            
            let html = '<h2>API Test Results:</h2>';
            html += '<p>API loaded: ' + (window.API ? 'YES' : 'NO') + '</p>';
            html += '<p>TokenManager loaded: ' + (window.TokenManager ? 'YES' : 'NO') + '</p>';
            html += '<p>checkAuth loaded: ' + (window.checkAuth ? 'YES' : 'NO') + '</p>';
            html += '<p>API_BASE_URL: ' + (window.API_BASE_URL || 'Not set') + '</p>';
            
            if (window.TokenManager) {
                html += '<h3>Token Info:</h3>';
                html += '<p>Token: ' + (TokenManager.getToken() ? 'Present' : 'Missing') + '</p>';
                html += '<p>Username: ' + (TokenManager.getUsername() || 'Not set') + '</p>';
                html += '<p>UserID: ' + (TokenManager.getUserId() || 'Not set') + '</p>';
            }
            
            if (window.API) {
                html += '<h3>API Methods:</h3>';
                html += '<p>API.auth: ' + (window.API.auth ? 'YES' : 'NO') + '</p>';
                html += '<p>API.materials: ' + (window.API.materials ? 'YES' : 'NO') + '</p>';
                html += '<p>API.quizzes: ' + (window.API.quizzes ? 'YES' : 'NO') + '</p>';
                html += '<p>API.dashboard: ' + (window.API.dashboard ? 'YES' : 'NO') + '</p>';
            }
            
            statusDiv.innerHTML = html;
        });
    </script>
</body>
</html>
